(()=>{"use strict";var e={formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_invalid",inputErrorClass:"popup__item_type_error",errorClass:"error_visible"},t=document.querySelector(".popup__form_add_card"),n=document.querySelector(".popup__form_edit_profile"),o=document.querySelector(".popup__item_input_name"),r=document.querySelector(".popup__item_input_occupation"),i=document.querySelector(".profile__edit-button"),u=document.querySelector(".profile__add-button"),a=document.querySelector(".profile__title"),l=document.querySelector(".profile__subtitle"),c=document.querySelector(".elements__items");function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){function e(t,n,o){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"_handleCardLike",(function(e){e.target.classList.toggle("element__like_active")})),p(this,"_handleCardDelete",(function(){r._element.remove()})),this._name=t.name,this._link=t.link,this._templateSelector=n,this._handlePreviewCard=o}var t,n;return t=e,(n=[{key:"_getCardTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"createCardElement",value:function(){return this._element=this._getCardTemplate(),this._cardImageElement=this._element.querySelector(".element__image"),this._cardNameElement=this._element.querySelector(".element__text"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardNameElement.textContent=this._name,this._likeButton=this._element.querySelector(".element__like"),this._deleteButton=this._element.querySelector(".element__delete-button"),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",this._handleCardLike),this._deleteButton.addEventListener("click",this._handleCardDelete),this._cardImageElement.addEventListener("click",(function(){e._handlePreviewCard(e._name,e._link)}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=_((function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"_showInputError",(function(e,t){var n=o._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(o._validationConfig.inputErrorClass),n.classList.add(o._validationConfig.errorClass),n.textContent=t})),m(this,"_hideInputError",(function(e){var t=o._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(o._validationConfig.inputErrorClass),t.classList.remove(o._validationConfig.errorClass),t.textContent=""})),m(this,"_checkInputValidity",(function(e){e.validity.valid?o._hideInputError(e):o._showInputError(e,e.validationMessage)})),m(this,"_hasInvalidInput",(function(){return o._inputList.some((function(e){return!e.validity.valid}))})),m(this,"disableButton",(function(){o._buttonElement.classList.add(o._validationConfig.inactiveButtonClass),o._buttonElement.disabled=!0})),m(this,"activateButton",(function(){o._buttonElement.classList.remove(o._validationConfig.inactiveButtonClass),o._buttonElement.disabled=!1})),m(this,"_toggleButtonState",(function(){o._hasInvalidInput()?o.disableButton():o.activateButton()})),m(this,"_setEventListeners",(function(){o._toggleButtonState(),o._inputList.forEach((function(e){e.addEventListener("input",(function(){o._checkInputValidity(e),o._toggleButtonState()}))}))})),m(this,"enableValidation",(function(){o._setEventListeners()})),m(this,"resetValidationErrors",(function(){o._toggleButtonState(),o._inputList.forEach((function(e){o._hideInputError(e)}))})),this._validationConfig=t,this._formElement=n,this._buttonSubmitSelector=t.submitButtonSelector,this._buttonElement=this._formElement.querySelector(this._buttonSubmitSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._validationConfig.inputSelector))}));function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var b=function(){function e(t,n){var o=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=o,this._renderer=r,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._closePopupKeydownEscHandler=this._closePopupKeydownEscHandler.bind(this)}var t,n;return t=e,(n=[{key:"openPopup",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._closePopupKeydownEscHandler)}},{key:"closePopup",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._closePopupKeydownEscHandler)}},{key:"_closePopupKeydownEscHandler",value:function(e){"Escape"===e.key&&this.closePopup()}},{key:"_closePopupClickOverlayHandler",value:function(e){e.target.classList.contains("popup_opened")&&this.closePopup()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__close-icon").addEventListener("click",(function(){e.closePopup()})),this._popupElement.addEventListener("mousedown",this._closePopupClickOverlayHandler.bind(this))}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=P(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},O.apply(this,arguments)}function P(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function S(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(o);if(r){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._name=t._popupElement.querySelector(".popup__figcaption"),t._link=t._popupElement.querySelector(".popup__image"),t}return t=u,(n=[{key:"openPopup",value:function(e,t){O(j(u.prototype),"openPopup",this).call(this),this._name.textContent=e,this._link.src=t,this._link.alt=e}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(w);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=I(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},B.apply(this,arguments)}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function H(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(o);if(r){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return H(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleFormSubmit=t,n._formElement=n._popupElement.querySelector(".popup__form"),n._inputList=n._formElement.querySelectorAll(".popup__item"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formInputValues={},this._inputList.forEach((function(t){e._formInputValues[t.name]=t.value})),this._formInputValues}},{key:"setEventListeners",value:function(){var e=this;B(D(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.closePopup()}))}},{key:"closePopup",value:function(){B(D(u.prototype),"closePopup",this).call(this),this._formElement.reset()}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(w);function V(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var R=function(){function e(t){var n=t.profileName,o=t.profileOccupation;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=n,this._profileOccupation=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userInfo={name:this._profileName.textContent,occupation:this._profileOccupation.textContent},this._userInfo}},{key:"setUserInfo",value:function(e){this._profileName.textContent=e.name,this._profileOccupation.textContent=e.occupation}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),T=new h(e,n);T.enableValidation();var G=new h(e,t);G.enableValidation();var A=new x("#popup-image");A.setEventListeners();var N=function(e,t){A.openPopup(e,t)},W=function(e){return new f(e,".element__template",N).createCardElement()},Y=new b({items:[{name:"Луксор",link:"https://images.unsplash.com/photo-1657218842456-35280cac5d47?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80.jpg"},{name:"Агуас-Кальентес",link:"https://images.unsplash.com/photo-1415804941191-bc0c3bbac10d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=580&q=80.jpg"},{name:"Париж",link:"https://images.unsplash.com/photo-1659891670855-a49219141f34?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1374&q=80.jpg"},{name:"Венеция",link:"https://images.unsplash.com/photo-1656365084095-99110bc92e81?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80.jpg"},{name:"Невада",link:"https://images.unsplash.com/photo-1624822764351-77c42080f626?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=464&q=80.jpg"},{name:"Скалы Севен Систерс",link:"https://images.unsplash.com/photo-1512778595306-cd1a150f561c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80.jpg"}],renderer:function(e){Y.addItem(W(e))}},c);Y.renderItems();var K=new M("#popup-add-card",(function(e){Y.addItem(W(e))}));K.setEventListeners(),u.addEventListener("click",(function(){K.openPopup(),G.resetValidationErrors()}));var U=new R({profileName:a,profileOccupation:l}),F=new M("#popup-edit-profile",(function(e,t){U.setUserInfo(e,t)}));F.setEventListeners(),i.addEventListener("click",(function(){var e;F.openPopup(),e=U.getUserInfo(),o.value=e.name,r.value=e.occupation,T.resetValidationErrors()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUJYLFlBTlhlLEVBQVdMLEVBQVlNLGNBQzdCOUgsRUFBcUI2RixNQUFRZ0MsRUFBUzFHLEtBQ3RDbEIsRUFBMkI0RixNQUFRZ0MsRUFBU3RCLFdBTTVDRSxFQUF5QmMsdUJBQzFCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9pbml0aWFsLWNhcmRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY2FyZEluaXRpYWxFbGVtZW50cyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogJ9Cb0YPQutGB0L7RgCcsXHJcbiAgICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTY1NzIxODg0MjQ1Ni0zNTI4MGNhYzVkNDc/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTM4NyZxPTgwLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICfQkNCz0YPQsNGBLdCa0LDQu9GM0LXQvdGC0LXRgScsXHJcbiAgICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQxNTgwNDk0MTE5MS1iYzBjM2JiYWMxMGQ/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTU4MCZxPTgwLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICfQn9Cw0YDQuNC2JyxcclxuICAgICAgbGluazogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjU5ODkxNjcwODU1LWE0OTIxOTE0MWYzND9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTM3NCZxPTgwLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICfQktC10L3QtdGG0LjRjycsXHJcbiAgICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTY1NjM2NTA4NDA5NS05OTExMGJjOTJlODE/aXhsaWI9cmItMS4yLjEmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTg3MCZxPTgwLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICfQndC10LLQsNC00LAnLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MjQ4MjI3NjQzNTEtNzdjNDIwODBmNjI2P2l4bGliPXJiLTEuMi4xJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz00NjQmcT04MC5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiAn0KHQutCw0LvRiyDQodC10LLQtdC9INCh0LjRgdGC0LXRgNGBJyxcclxuICAgICAgbGluazogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTEyNzc4NTk1MzA2LWNkMWExNTBmNTYxYz9peGxpYj1yYi0xLjIuMSZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODcwJnE9ODAuanBnJ1xyXG4gICAgfVxyXG4gIF07IiwiZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faXRlbScsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2ludmFsaWQnLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2l0ZW1fdHlwZV9lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAnZXJyb3JfdmlzaWJsZSdcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fYWRkX2NhcmQnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fZWRpdF9wcm9maWxlJyk7XHJcbmV4cG9ydCBjb25zdCBuYW1lRWRpdElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faXRlbV9pbnB1dF9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBvY2N1cGF0aW9uRWRpdElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faXRlbV9pbnB1dF9vY2N1cGF0aW9uJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE9wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRBZGRPcGVuRm9ybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVPY2N1cGF0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19zdWJ0aXRsZScpO1xyXG5leHBvcnQgY29uc3QgY2FyZExpc3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19pdGVtcycpOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGNhcmRFbGVtZW50SW5mbywgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlUHJldmlld0NhcmQpIHtcclxuICAgIHRoaXMuX25hbWUgPSBjYXJkRWxlbWVudEluZm8ubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRWxlbWVudEluZm8ubGluaztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlUHJldmlld0NhcmQgPSBoYW5kbGVQcmV2aWV3Q2FyZDtcclxuICB9XHJcblxyXG4gIF9nZXRDYXJkVGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfTtcclxuICBcclxuICBjcmVhdGVDYXJkRWxlbWVudCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRDYXJkVGVtcGxhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX2NhcmROYW1lRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RleHQnKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmROYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlLWJ1dHRvbicpO1xyXG4gICAgXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVDYXJkTGlrZSA9IChldnQpID0+IHtcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVDYXJkRGVsZXRlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2FyZExpa2UpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVQcmV2aWV3Q2FyZCh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl92YWxpZGF0aW9uQ29uZmlnID0gdmFsaWRhdGlvbkNvbmZpZztcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9idXR0b25TdWJtaXRTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgX2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGRpc2FibGVCdXR0b24gPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBhY3RpdmF0ZUJ1dHRvbiA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZUJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlc2V0VmFsaWRhdGlvbkVycm9ycyA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG59XHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2Nsb3NlUG9wdXBLZXlkb3duRXNjSGFuZGxlciA9IHRoaXMuX2Nsb3NlUG9wdXBLZXlkb3duRXNjSGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW5Qb3B1cCgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2Nsb3NlUG9wdXBLZXlkb3duRXNjSGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VQb3B1cCgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2Nsb3NlUG9wdXBLZXlkb3duRXNjSGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgX2Nsb3NlUG9wdXBLZXlkb3duRXNjSGFuZGxlcihldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2Nsb3NlUG9wdXBDbGlja092ZXJsYXlIYW5kbGVyKGV2dCkge1xyXG4gICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtaWNvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fY2xvc2VQb3B1cENsaWNrT3ZlcmxheUhhbmRsZXIuYmluZCh0aGlzKSk7ICAgICAgICBcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWdjYXB0aW9uJyk7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlblBvcHVwKGNhcmROYW1lLCBjYXJkTGluaykge1xyXG4gICAgICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG4gICAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBjYXJkTmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rLnNyYyA9IGNhcmRMaW5rO1xyXG4gICAgICAgIHRoaXMuX2xpbmsuYWx0ID0gY2FyZE5hbWU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faXRlbScpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtSW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1JbnB1dFZhbHVlc1tpbnB1dEVsZW1lbnQubmFtZV0gPSBpbnB1dEVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgfSk7ICAgIFxyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtSW5wdXRWYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZVBvcHVwKCkge1xyXG4gICAgICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3Ioe3Byb2ZpbGVOYW1lLCBwcm9maWxlT2NjdXBhdGlvbn0pIHtcclxuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IHByb2ZpbGVOYW1lO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVPY2N1cGF0aW9uID0gcHJvZmlsZU9jY3VwYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckluZm8gPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBvY2N1cGF0aW9uOiB0aGlzLl9wcm9maWxlT2NjdXBhdGlvbi50ZXh0Q29udGVudFxyXG4gICAgICAgIH07ICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKHVzZXJJbmZvKSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB1c2VySW5mby5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVPY2N1cGF0aW9uLnRleHRDb250ZW50ID0gdXNlckluZm8ub2NjdXBhdGlvbjtcclxuICAgIH1cclxufSIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5cclxuaW1wb3J0IHsgY2FyZEluaXRpYWxFbGVtZW50cyB9IGZyb20gJy4uL3V0aWxzL2luaXRpYWwtY2FyZHMuanMnO1xyXG5pbXBvcnQge1xyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgY2FyZEZvcm1FbGVtZW50LFxyXG4gIHByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQsXHJcbiAgbmFtZUVkaXRJbnB1dEVsZW1lbnQsXHJcbiAgb2NjdXBhdGlvbkVkaXRJbnB1dEVsZW1lbnQsXHJcbiAgcHJvZmlsZUVkaXRPcGVuQnV0dG9uLFxyXG4gIGNhcmRBZGRPcGVuRm9ybUJ1dHRvbixcclxuICBwcm9maWxlTmFtZUVsZW1lbnQsXHJcbiAgcHJvZmlsZU9jY3VwYXRpb25FbGVtZW50LFxyXG4gIGNhcmRMaXN0RWxlbWVudFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcblxyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuXHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwcm9maWxlRWRpdEZvcm1FbGVtZW50KTtcclxucHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgY2FyZEFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBjYXJkRm9ybUVsZW1lbnQpO1xyXG5jYXJkQWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBjYXJkUHJldmlld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJyNwb3B1cC1pbWFnZScpO1xyXG5jYXJkUHJldmlld0ltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGhhbmRsZVByZXZpZXdDYXJkID0gKGNhcmROYW1lLCBjYXJkTGluaykgPT4geyBcclxuICBjYXJkUHJldmlld0ltYWdlUG9wdXAub3BlblBvcHVwKGNhcmROYW1lLCBjYXJkTGluayk7XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmRFbGVtZW50SW5mbykgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRWxlbWVudEluZm8sICcuZWxlbWVudF9fdGVtcGxhdGUnLCBoYW5kbGVQcmV2aWV3Q2FyZCk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmNyZWF0ZUNhcmRFbGVtZW50KCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59O1xyXG5cclxuY29uc3QgaW5pdGlhbENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xyXG4gIGl0ZW1zOiBjYXJkSW5pdGlhbEVsZW1lbnRzLFxyXG4gIHJlbmRlcmVyOiAoaW5pdGlhbENhcmRFbGVtZW50KSA9PiB7XHJcbiAgICBpbml0aWFsQ2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGluaXRpYWxDYXJkRWxlbWVudCkpO1xyXG4gIH1cclxufSwgY2FyZExpc3RFbGVtZW50KTtcclxuXHJcbmluaXRpYWxDYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5cclxuY29uc3QgaGFuZGxlQWRkQ2FyZFN1Ym1pdCA9IChuZXdDYXJkRWxlbWVudCkgPT4ge1xyXG4gIGluaXRpYWxDYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQobmV3Q2FyZEVsZW1lbnQpKTtcclxufTtcclxuXHJcblxyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnI3BvcHVwLWFkZC1jYXJkJywgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XHJcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY2FyZEFkZE9wZW5Gb3JtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuUG9wdXAoKTtcclxuICBjYXJkQWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb25FcnJvcnMoKTtcclxufSk7XHJcblxyXG5cclxuY29uc3QgcHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHByb2ZpbGVOYW1lOiBwcm9maWxlTmFtZUVsZW1lbnQsIFxyXG4gIHByb2ZpbGVPY2N1cGF0aW9uOiBwcm9maWxlT2NjdXBhdGlvbkVsZW1lbnR9KTtcclxuXHJcbmNvbnN0IGhhbmRsZUVkaXRQcm9maWxlU3VibWl0ID0gKHVzZXJOYW1lLCB1c2VyT2NjdXBhdGlvbikgPT4ge1xyXG4gIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHVzZXJOYW1lLCB1c2VyT2NjdXBhdGlvbik7XHJcbn07XHJcblxyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjcG9wdXAtZWRpdC1wcm9maWxlJywgaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXQpO1xyXG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBzZXRFZGl0UHJvZmlsZU1vZGUgPSAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVFZGl0SW5wdXRFbGVtZW50LnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICBvY2N1cGF0aW9uRWRpdElucHV0RWxlbWVudC52YWx1ZSA9IHVzZXJEYXRhLm9jY3VwYXRpb247XHJcbn07XHJcblxyXG5wcm9maWxlRWRpdE9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuUG9wdXAoKTtcclxuICBzZXRFZGl0UHJvZmlsZU1vZGUoKTtcclxuICBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uRXJyb3JzKCk7XHJcbn0pOyJdLCJuYW1lcyI6WyJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjYXJkRm9ybUVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlRWRpdEZvcm1FbGVtZW50IiwibmFtZUVkaXRJbnB1dEVsZW1lbnQiLCJvY2N1cGF0aW9uRWRpdElucHV0RWxlbWVudCIsInByb2ZpbGVFZGl0T3BlbkJ1dHRvbiIsImNhcmRBZGRPcGVuRm9ybUJ1dHRvbiIsInByb2ZpbGVOYW1lRWxlbWVudCIsInByb2ZpbGVPY2N1cGF0aW9uRWxlbWVudCIsImNhcmRMaXN0RWxlbWVudCIsIkNhcmQiLCJjYXJkRWxlbWVudEluZm8iLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlUHJldmlld0NhcmQiLCJldnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfZWxlbWVudCIsInJlbW92ZSIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVQcmV2aWV3Q2FyZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZ2V0Q2FyZFRlbXBsYXRlIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJfY2FyZE5hbWVFbGVtZW50Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfbGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUNhcmRMaWtlIiwiX2hhbmRsZUNhcmREZWxldGUiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsImFkZCIsIl92YWxpZGF0aW9uQ29uZmlnIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2lucHV0TGlzdCIsInNvbWUiLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJhY3RpdmF0ZUJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2J1dHRvblN1Ym1pdFNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIlNlY3Rpb24iLCJjb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZVBvcHVwS2V5ZG93bkVzY0hhbmRsZXIiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlUG9wdXAiLCJjb250YWlucyIsIl9jbG9zZVBvcHVwQ2xpY2tPdmVybGF5SGFuZGxlciIsIlBvcHVwV2l0aEltYWdlIiwiY2FyZE5hbWUiLCJjYXJkTGluayIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybUlucHV0VmFsdWVzIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVPY2N1cGF0aW9uIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVPY2N1cGF0aW9uIiwiX3VzZXJJbmZvIiwib2NjdXBhdGlvbiIsInVzZXJJbmZvIiwicHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImNhcmRBZGRGb3JtVmFsaWRhdG9yIiwiY2FyZFByZXZpZXdJbWFnZVBvcHVwIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJvcGVuUG9wdXAiLCJjcmVhdGVDYXJkIiwiY3JlYXRlQ2FyZEVsZW1lbnQiLCJpbml0aWFsQ2FyZExpc3QiLCJpbml0aWFsQ2FyZEVsZW1lbnQiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJhZGRDYXJkUG9wdXAiLCJuZXdDYXJkRWxlbWVudCIsInJlc2V0VmFsaWRhdGlvbkVycm9ycyIsInByb2ZpbGVJbmZvIiwicHJvZmlsZUVkaXRQb3B1cCIsInVzZXJOYW1lIiwidXNlck9jY3VwYXRpb24iLCJzZXRVc2VySW5mbyIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9