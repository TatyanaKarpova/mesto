(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){function n(e,o,i,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"_handleCardLike",(function(e){e.target.classList.toggle("element__like_active")})),t(this,"_handleCardDelete",(function(){a._element.remove()})),this._name=e,this._link=o,this._templateSelector=i,this._handlePreviewCard=r}var o,i;return o=n,(i=[{key:"_getCardTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"createCardElement",value:function(){var e=this;return this._element=this._getCardTemplate(),this._cardImageElement=this._element.querySelector(".element__image"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._element.querySelector(".element__text").textContent=this._name,this._element.querySelector(".element__like").addEventListener("click",this._handleCardLike),this._element.querySelector(".element__delete-button").addEventListener("click",this._handleCardDelete),this._cardImageElement.addEventListener("click",(function(){e._handlePreviewCard(e._name,e._link)})),this._element}}])&&e(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),n}(),o=document.querySelector(".popup__image"),i=document.querySelector(".popup__figcaption"),r=document.querySelector("#popup-add-card"),a=document.querySelector("#popup-image"),l=function(e){e.classList.add("popup_opened"),e.addEventListener("click",u),document.addEventListener("keydown",c)},u=function(e){if(e.target.classList.contains("popup_opened")){var t=document.querySelector(".popup_opened");s(t)}},c=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");s(t)}},s=function(e){e.classList.remove("popup_opened"),e.removeEventListener("click",u),document.removeEventListener("keydown",c)};function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=d((function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_showInputError",(function(e,t){var n=o._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(o._validationConfig.inputErrorClass),n.classList.add(o._validationConfig.errorClass),n.textContent=t})),f(this,"_hideInputError",(function(e){var t=o._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(o._validationConfig.inputErrorClass),t.classList.remove(o._validationConfig.errorClass),t.textContent=""})),f(this,"_checkInputValidity",(function(e){e.validity.valid?o._hideInputError(e):o._showInputError(e,e.validationMessage)})),f(this,"_hasInvalidInput",(function(){return o._inputList.some((function(e){return!e.validity.valid}))})),f(this,"disableButton",(function(){o._buttonElement.classList.add(o._validationConfig.inactiveButtonClass),o._buttonElement.disabled=!0})),f(this,"activateButton",(function(){o._buttonElement.classList.remove(o._validationConfig.inactiveButtonClass),o._buttonElement.disabled=!1})),f(this,"_toggleButtonState",(function(){o._hasInvalidInput()?o.disableButton(o._buttonElement):o.activateButton(o._buttonElement)})),f(this,"_setEventListeners",(function(){o._toggleButtonState(),o._inputList.forEach((function(e){e.addEventListener("input",(function(){o._checkInputValidity(e),o._toggleButtonState()}))}))})),f(this,"enableValidation",(function(){Array.from(document.querySelectorAll(o._validationConfig.formSelector)).forEach((function(){o._setEventListeners()}))})),f(this,"resetValidationErrors",(function(){o._toggleButtonState(),o._inputList.forEach((function(e){o._errorElement=o._formElement.querySelector("#".concat(e.id,"-error")),o._hideInputError(e)}))})),this._validationConfig=t,this._formElement=n,this._buttonSubmitSelector=t.submitButtonSelector,this._buttonElement=this._formElement.querySelector(this._buttonSubmitSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._validationConfig.inputSelector))})),m={formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_invalid",inputErrorClass:"popup__item_type_error",errorClass:"error_visible"},h=document.querySelector(".popup__form_add_card"),v=document.querySelector(".popup__form_edit_profile"),b=new _(m,v);b.enableValidation();var y=new _(m,h);y.enableValidation();var E=document.querySelector("#popup-edit-profile"),g=document.querySelectorAll(".popup__close-icon"),S=document.querySelector(".popup__item_input_name"),x=document.querySelector(".popup__item_input_occupation"),w=h.querySelector(".popup__item_input_card-name"),C=h.querySelector(".popup__item_input_card-photo-url"),q=document.querySelector(".profile__edit-button"),k=document.querySelector(".profile__add-button"),L=document.querySelector(".profile__title"),B=document.querySelector(".profile__subtitle"),M=document.querySelector(".elements__items");g.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return s(t)}))}));var j=function(e,t){o.src=t,o.setAttribute("alt",e),i.textContent=e,l(a)},H=function(e){return new n(e.name,e.link,".element__template",j).createCardElement()};q.addEventListener("click",(function(){S.value=L.textContent,x.value=B.textContent,l(E),b.resetValidationErrors(),b.activateButton()})),k.addEventListener("click",(function(){l(r),y.resetValidationErrors(),y.disableButton(),h.reset()})),v.addEventListener("submit",(function(e){e.preventDefault();var t=S.value,n=x.value;L.textContent=t,B.textContent=n,s(E)})),h.addEventListener("submit",(function(e){var t;e.preventDefault(),t={name:w.value,link:C.value},M.prepend(H(t)),e.target.reset(),s(r)})),[{name:"Луксор",link:"https://images.unsplash.com/photo-1657218842456-35280cac5d47?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80.jpg"},{name:"Агуас-Кальентес",link:"https://images.unsplash.com/photo-1415804941191-bc0c3bbac10d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=580&q=80.jpg"},{name:"Париж",link:"https://images.unsplash.com/photo-1659891670855-a49219141f34?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1374&q=80.jpg"},{name:"Венеция",link:"https://images.unsplash.com/photo-1656365084095-99110bc92e81?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80.jpg"},{name:"Невада",link:"https://images.unsplash.com/photo-1624822764351-77c42080f626?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=464&q=80.jpg"},{name:"Скалы Севен Систерс",link:"https://images.unsplash.com/photo-1512778595306-cd1a150f561c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80.jpg"}].forEach((function(e){M.prepend(H(e))}))})();